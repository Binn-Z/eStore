{% extends "base.html" %}

{% block content%}
{% if is_login %}
<div class='row'>
	<div class=" col-sm-4 col-lg-offset-4" >
		<table border="1">
			<tr>
				<td>商品名称</td>
				<td>商品单价</td>
				<td>优惠信息</td>
				<td>商品数量</td>
				<td>总金额</td>
			</tr>
	{% for object in object_list%}	
			<tr>
				<td>{{object.g_Id}}</td>
				<td>{{object.g_Id.g_Price}}</td>
				<td>*{{object.g_Id.g_Discount}}</td>
				<td>{{object.o_Amount}}</td>
				<td>{{object.o_total}}</td>
			</tr>
		</table>
	</div>
	{% endfor %}
</div>
{% else %}
<h2 style="text-align:center">您未登录</h2>
{% endif %}

<div class="bookNum">
	<input id="min" name="" type="button" value="-" >  
	<input id="num" name="num" type="text" value="1" readonly="true" onchange="setTotal();" >  
	<input id="add" name="" type="button" value="+" > 
</div>


{% endblock%}

{% block script %}
<script type="text/javascript">
 	//根据选择的数量计算总价，并显示出来  
 	function setTotal(){  
 		var t = $("#num");  
        var tmp = document.getElementById("totalPrice");//需要修改的总价位置1  
        var tmp1 = document.getElementById("totalPrice1");//需要修改的总价位置2  
        if(/\D/.test(t.val())){//检查用户输入的值是否是数字  
        	alert("请您输入正确的数量！");  
        	t.val(1);  
        	tmp.innerHTML = "2488元";  
        	tmp1.innerHTML = "2488元";  
        }  
        else{//如果输入合法             
        	if(t.val() > 10){  
        		confirm("您真的准备一次购买这么多？");  
        		tmp.innerHTML = t.val()*2488 +"元";  
        		tmp1.innerHTML = t.val()*2488 +"元";  
        	}  
        }  
    }  

$(function(){ //这里是加减按钮都启用的情况  
	var t = $("#num");   
	$("#add").click(function(){       
		t.val(parseInt(t.val())+1)  
		setTotal();  
	})  
	$("#min").click(function(){  
		if(t.val()>1){  
			t.val(parseInt(t.val())-1);  
		}  
		else{  
			alert("至少购买一件哦！");  
		}  
        //setTotal();  
    })  
});  
</script>
{% endblock %}
